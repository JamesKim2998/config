# Use / for filter instead of find
[[mgr.prepend_keymap]]
on = "/"
run = "filter --smart"
desc = "Filter files"

# Tab navigation, move original info to 'i'
# Use <BackTab> not <S-Tab> â€” legacy backtab (ESC[Z) without Kitty Keyboard Protocol
[[mgr.prepend_keymap]]
on = "<Tab>"
run = "tab_switch 1 --relative"
desc = "Next tab"

[[mgr.prepend_keymap]]
on = "<BackTab>"
run = "tab_switch -1 --relative"
desc = "Previous tab"

[[mgr.prepend_keymap]]
on = "i"
run = "spot"
desc = "File info (spot)"

# q closes tab (like Ctrl+C)
[[mgr.prepend_keymap]]
on  = "q"
run = "close"
desc = "Close tab, or quit if last tab"

# Keep Space on the current row after toggling selection
[[mgr.prepend_keymap]]
on   = "<Space>"
run  = "toggle"          # no arrow 1
desc = "Toggle selection (no auto-move)"

# https://github.com/yazi-rs/plugins/tree/main/smart-enter.yazi
[[mgr.prepend_keymap]]
on   = "l"
run  = "plugin smart-enter"
desc = "Enter the child directory, or open the file"

# https://github.com/orhnk/system-clipboard.yazi?tab=readme-ov-file#configuration
[[mgr.prepend_keymap]]
on = "<C-y>"
run = "plugin system-clipboard"

# Quick jump shortcuts (g prefix)
[[mgr.prepend_keymap]]
on   = [ "g", "n" ]
run  = "cd ~/Downloads"
desc = "Downloads"

[[mgr.prepend_keymap]]
on   = [ "g", "d" ]
run  = "cd ~/Develop"
desc = "Develop"

[[mgr.prepend_keymap]]
on   = [ "g", "c" ]
run  = "cd ~/Develop/config"
desc = "Config"

[[mgr.prepend_keymap]]
on   = [ "g", "1" ]
run  = "cd ~/Develop/meow-tower"
desc = "Meow Tower"

[[mgr.prepend_keymap]]
on   = [ "g", "2" ]
run  = "cd ~/Develop/meow-toolbox"
desc = "Meow Toolbox"

[[mgr.prepend_keymap]]
on   = [ "g", "3" ]
run  = "cd ~/Develop/meow-assets"
desc = "Meow Assets"

# https://github.com/lpnh/fr.yazi?tab=readme-ov-file#plugin-args
[[mgr.prepend_keymap]]
on = "<S-s>"
run = "plugin fr rg"
desc = "Search file by content (rg)"

# https://github.com/yazi-rs/plugins/tree/main/mactag.yazi
[[mgr.prepend_keymap]]
on   = [ "b", "a" ]
run  = "plugin mactag add"
desc = "Tag selected files"

[[mgr.prepend_keymap]]
on   = [ "b", "r" ]
run  = "plugin mactag remove"
desc = "Untag selected files"

# https://yazi-rs.github.io/docs/tips
[[mgr.prepend_keymap]]
on = [ "g", "r" ]
run = 'shell -- ya emit cd "$(git rev-parse --show-toplevel)"'
desc = "Git root directory"

# https://github.com/Lil-Dank/lazygit.yazi
[[mgr.prepend_keymap]]
on   = [ "g", "i" ]
run  = "shell --block lazygit"
desc = "run lazygit"

# https://github.com/yazi-rs/plugins/tree/main/chmod.yazi#usage
[[mgr.prepend_keymap]]
on   = [ "c", "m" ]
run  = "plugin chmod"
desc = "Chmod on selected files"

# https://github.com/ndtoan96/ouch.yazi?tab=readme-ov-file#compression
[[mgr.prepend_keymap]]
on = ["C"]
run = "plugin ouch"
desc = "Compress with ouch"

# Reorder tabs
[[mgr.prepend_keymap]]
on = "<C-S-PageUp>"
run = "tab_swap -1"
desc = "Move tab before"

[[mgr.prepend_keymap]]
on = "<C-S-PageDown>"
run = "tab_swap 1"
desc = "Move tab after"

# https://github.com/yazi-rs/plugins/tree/main/jump-to-char.yazi
[[mgr.prepend_keymap]]
on = "f"
run = "plugin jump-to-char"
desc = "Jump to char"

# https://github.com/yazi-rs/plugins/tree/main/toggle-pane.yazi
[[mgr.prepend_keymap]]
on = "T"
run = "plugin toggle-pane min-preview"
desc = "Toggle preview pane"

[[mgr.prepend_keymap]]
on = "<C-n>"
run = "plugin toggle-pane min-parent"
desc = "Toggle parent pane"

