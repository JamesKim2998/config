[mgr]
show_hidden = true

[open]
prepend_rules = [
	{ url = "*.tps", use = ["edit", "open"] },
	{ url = "*.xls", use = "open" },
	{ url = "*.xlsx", use = "open" },
]

# URL-based rules (*.ext) before MIME rules - MIME detection is often wrong

[plugin]
prepend_fetchers = [
	# https://github.com/yazi-rs/plugins/tree/main/mactag.yazi
	{ id = "mactag", url = "*", run = "mactag" },
	{ id = "mactag", url = "*/", run = "mactag" },
	# https://github.com/yazi-rs/plugins/tree/main/git.yazi
	{ id = "git", url = "*", run = "git" },
	{ id = "git", url = "*/", run = "git" },
]
prepend_preloaders = [
	# https://github.com/macydnah/office.yazi
	{ url = "*.docx", run = "office" },
	{ mime = "application/openxmlformats-officedocument.*", run = "office" },
	{ mime = "application/oasis.opendocument.*", run = "office" },
	{ mime = "application/ms-*", run = "office" },
	{ mime = "application/msword", run = "office" },
	# https://github.com/boydaihungst/mediainfo.yazi
	# Replace magick, image, video with mediainfo
	{ mime = "{audio,video,image}/*", run = "mediainfo" },
	{ mime = "application/subrip", run = "mediainfo" },
]
prepend_previewers = [
	# meow-tower langpack binary format (matches files in langpack/{lang}/ dirs)
	{ url = "**/langpack/{KO,EN,JA,ZH_CN,ZH_TW,DE,ES,FR,ID,IT,PT_BR,RU,TR,K,S}/*", run = "langpack" },
	# xleak for fast Excel preview
	{ url = "*.xls", run = "xleak" },
	{ url = "*.xlsx", run = "xleak" },
	# https://github.com/macydnah/office.yazi
	{ url = "*.docx", run = "office" },
	# https://github.com/mgumz/yazi-plugin-bat
	{ url = "*.csv", run = "bat" },
	{ url = "*.md", run = "bat" },
	{ url = "*.json", run = "bat" },
	{ mime = "application/json", run = "bat" },
	{ url = "**/bun.lock", run = "bat" },
	# office MIME rules
	{ mime = "application/openxmlformats-officedocument.*", run = "office" },
	{ mime = "application/oasis.opendocument.*", run = "office" },
	{ mime = "application/ms-*", run = "office" },
	{ mime = "application/msword", run = "office" },
	# https://github.com/boydaihungst/mediainfo.yazi
	# Replace magick, image, video with mediainfo
	{ mime = "{audio,video,image}/*", run = "mediainfo"},
	{ mime = "application/subrip", run = "mediainfo" },
	# https://github.com/ndtoan96/ouch.yazi
	# Archive previewer
	{ mime = "application/*zip",            run = "ouch" },
	{ mime = "application/x-tar",           run = "ouch" },
	{ mime = "application/x-bzip2",         run = "ouch" },
	{ mime = "application/x-7z-compressed", run = "ouch" },
	{ mime = "application/x-rar",           run = "ouch" },
	{ mime = "application/x-xz",            run = "ouch" },
	{ mime = "application/xz",              run = "ouch" },
]
# https://github.com/mgumz/yazi-plugin-bat
# Use append_previewers to keep defaults (image, video, etc.) and add bat for text
append_previewers = [
	{ mime = "text/*",                 run = "bat" },
	{ mime = "*/xml",                  run = "bat" },
	{ mime = "*/cs",                   run = "bat" },
	{ mime = "*/javascript",           run = "bat" },
	{ mime = "*/x-wine-extension-ini", run = "bat" },
]
